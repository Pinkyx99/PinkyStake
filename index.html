<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" href="/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MyStake Mini Games</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      @import url('https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Poppins:wght@400;600;700;800&display=swap');
      body {
        font-family: 'Poppins', sans-serif;
        background-color: #1a1d3a;
        color: #e0e0e0;
      }
      .font-poppins { font-family: 'Poppins', sans-serif; }
      .font-bebas { font-family: 'Bebas Neue', cursive; }
      
      .text-glow-purple {
        text-shadow: 0 0 8px rgba(192, 132, 252, 0.9), 0 0 20px rgba(139, 92, 246, 0.7);
      }
      
      @keyframes particle-roam {
        0% { transform: translateY(-10vh) translateX(0) rotate(0deg); opacity: 1; }
        100% { transform: translateY(110vh) translateX(var(--drift, 0)) rotate(720deg); opacity: 0; }
      }
      .animate-particle-roam {
        animation: particle-roam var(--duration) linear infinite;
      }

      @keyframes title-glow {
        0%, 100% { text-shadow: 0 0 10px #facc15, 0 0 20px #facc15, 0 0 30px #fde047, 0 0 40px #fde047; }
        50% { text-shadow: 0 0 20px #facc15, 0 0 30px #fde047, 0 0 40px #fde047, 0 0 50px #fef08a; }
      }
      .animate-title-glow {
        animation: title-glow 3s ease-in-out infinite;
      }

      /* -- Interactive Card Styles -- */
      .interactive-card {
        transform-style: preserve-3d;
        transform: scale(var(--scale, 1)) rotateX(var(--rotate-x, 0deg)) rotateY(var(--rotate-y, 0deg));
        transition: transform 0.6s cubic-bezier(0.23, 1, 0.32, 1);
      }
      .interactive-card.is-active {
        transition: none; /* For instant tracking with the mouse */
      }
      .card-shine {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        border-radius: 1rem;
        background: radial-gradient(
          circle at var(--pointer-x) var(--pointer-y),
          rgba(255, 255, 255, 0.25) 0%,
          rgba(255, 255, 255, 0) 50%
        );
        opacity: var(--shine-opacity, 0);
        transition: opacity 0.5s ease;
      }
      .card-image-wrapper {
        transform: translateZ(-10px) scale(1.05) translateX(var(--image-x, 0px)) translateY(var(--image-y, 0px));
        transition: transform 0.8s cubic-bezier(0.23, 1, 0.32, 1);
      }
      .card-title-wrapper {
        transform: translateZ(50px) translateX(var(--title-x, 0px)) translateY(var(--title-y, 0px));
        transition: transform 0.8s cubic-bezier(0.23, 1, 0.32, 1);
      }

      /* -- Chicken Game Tile Flip Animation -- */
      .tile {
        perspective: 1000px;
      }
      .tile-inner {
        position: relative;
        width: 100%;
        height: 100%;
        text-align: center;
        transition: transform 0.6s;
        transform-style: preserve-3d;
      }
      .tile.revealed .tile-inner {
        transform: rotateY(180deg);
      }
      .tile-front, .tile-back {
        position: absolute;
        width: 100%;
        height: 100%;
        -webkit-backface-visibility: hidden;
        backface-visibility: hidden;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 0.5rem;
      }
      .tile-back {
        transform: rotateY(180deg);
      }

      /* -- Chicken Game Item Animations -- */
      @keyframes chicken-reveal {
        0% { transform: scale(0.5) translateY(10px); opacity: 0; }
        70% { transform: scale(1.1); }
        100% { transform: scale(1) translateY(0); opacity: 1; }
      }
      .animate-chicken-reveal {
        animation: chicken-reveal 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
      }
      
      @keyframes bone-reveal {
        0% { transform: scale(0.8) rotate(-10deg) translateY(5px); opacity: 0; }
        50% { transform: scale(1.1) rotate(5deg); }
        100% { transform: scale(1) rotate(0deg) translateY(0); opacity: 1; }
      }
      .animate-bone-reveal {
        animation: bone-reveal 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
      }
      
      /* -- Blackjack Card Deal Animation -- */
      @keyframes deal-card {
        from {
          opacity: 0;
          transform: translateY(20px) scale(0.8);
        }
        to {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
      }
      .animate-deal-card {
        animation: deal-card 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
      }
      
      /* -- DOORS GAME (CINEMATIC REWRITE V3) -- */
      .doors-camera-container {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        flex-grow: 1;
        width: 100%;
        height: 100%;
        perspective: 2000px;
        position: relative;
        overflow: hidden;
      }

      .doors-camera {
        transform-style: preserve-3d;
      }

      .doors-grid {
        display: flex;
        justify-content: center;
        gap: 1.5rem;
        transform-style: preserve-3d;
        transition: opacity 0.4s ease-in-out;
      }
      
      .doors-multiplier-panel {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        padding: 0.25rem 2rem 0.5rem;
        background-color: rgba(15, 23, 42, 0.4); /* slate-900/40 */
        border-radius: 1rem;
        border: 1px solid rgba(148, 163, 184, 0.1); /* slate-400/10 */
        backdrop-filter: blur(10px);
        box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
      }
      
      .doors-multiplier-text {
        font-family: 'Bebas Neue', cursive;
        font-weight: 600;
        background: linear-gradient(135deg, #f0e6ff 25%, #d8b4fe 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        text-fill-color: transparent;
        text-shadow: 0 2px 25px rgba(216, 180, 254, 0.5);
      }
      
      @keyframes pulse-once {
        0% { transform: scale(1); }
        50% { transform: scale(1.1); }
        100% { transform: scale(1); }
      }
      
      .animate-pulse-once {
        animation: pulse-once 0.4s cubic-bezier(0.5, 1.5, 0.5, 1);
      }


      /* Individual Door Styling */
      .door-container {
        width: 140px;
        height: 220px;
        position: relative;
        transform-style: preserve-3d;
        transition: opacity 0.5s ease;
      }
      
      .faded-out {
        opacity: 0.3;
      }

      .door-leaf {
        position: absolute;
        width: 100%;
        height: 100%;
        transform-style: preserve-3d;
        transform-origin: left center;
      }
      
      .door-leaf.animate-swing {
        transition: transform 0.6s cubic-bezier(0.6, 0.05, 0.28, 0.9);
        transform: rotateY(-160deg) translateZ(50px);
      }
      
      .door-leaf.animate-thud {
        animation: door-thud-keyframes 0.8s cubic-bezier(0.5, 1, 0.5, 1) forwards;
      }

      @keyframes door-thud-keyframes {
        0% { transform: rotateY(0deg); }
        50% { transform: rotateY(-30deg); }
        100% { transform: rotateY(0deg); }
      }
      
      .door-front-face, .door-back-face {
        position: absolute;
        width: 100%;
        height: 100%;
        -webkit-backface-visibility: hidden;
        backface-visibility: hidden;
        border-radius: 0.75rem;
      }

      .door-back-face {
        transform: rotateY(180deg);
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .door-wall-behind {
        position: absolute;
        width: 100%;
        height: 100%;
        border-radius: 0.75rem;
        transform: translateZ(-10px);
        overflow: hidden;
      }
      
      @keyframes portal-pulse-simple {
        0%, 100% { transform: scale(1); box-shadow: 0 0 15px #a78bfa, 0 0 30px #8b5cf6; }
        50% { transform: scale(1.05); box-shadow: 0 0 25px #c4b5fd, 0 0 50px #a78bfa; }
      }
      .animate-portal-pulse-simple {
        animation: portal-pulse-simple 2.5s ease-in-out infinite;
      }
      
      @keyframes screen-shake-subtle {
        0%, 100% { transform: translate(0, 0); }
        25% { transform: translate(2px, -1px); }
        50% { transform: translate(-2px, 1px); }
        75% { transform: translate(1px, 2px); }
      }
      .animate-screen-shake-subtle {
          animation: screen-shake-subtle 0.4s ease-in-out;
      }
      
      @keyframes treasure-glow {
        0%, 100% {
            transform: scale(1);
        }
        50% {
            transform: scale(1.05);
        }
      }
      .animate-treasure-glow {
        animation: treasure-glow 1.5s ease-in-out infinite;
      }

      @keyframes fadeInUp {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      
      /* -- Roulette Animations V10 (Corrected Settle) -- */
      @keyframes roulette-wheel-spin-final {
        from { transform: rotate(0deg); }
        to { transform: rotate(var(--wheel-final-angle)); }
      }

      @keyframes roulette-ball-orbit-and-fade {
        from { transform: rotate(0deg); opacity: 1; }
        95% { opacity: 1; }
        to { transform: rotate(var(--ball-orbit-angle)); opacity: 0; }
      }
      
      /* This animation makes the ball land *inside* the pocket with a bounce */
      @keyframes roulette-ball-settle-in-pocket {
        0% {
          opacity: 0;
          transform: translateY(20px) scale(1.2); /* Start from slightly above the wheel surface, invisible */
        }
        30% {
          opacity: 1;
          transform: translateY(46px) scale(0.9); /* Land in pocket and squash */
        }
        50% {
          transform: translateY(40px) scale(1.05); /* Bounce up slightly */
        }
        70% {
          transform: translateY(46px) scale(0.98); /* Settle back down */
        }
        100% {
          opacity: 1;
          transform: translateY(46px) scale(1); /* Final resting state inside the pocket */
        }
      }
      
      /* -- CRASH GAME -- */
      .crash-graph-container {
        background: rgba(15, 23, 42, 0.4);
        border: 1px solid rgba(148, 163, 184, 0.1);
        backdrop-filter: blur(12px);
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
      }

      @keyframes text-glow-subtle {
        0%, 100% { text-shadow: 0 0 5px currentColor; }
        50% { text-shadow: 0 0 15px currentColor; }
      }
      
      .animate-text-glow-subtle {
        animation: text-glow-subtle 2s ease-in-out infinite;
      }

      /* Toggle Switch for Auto-Cashout */
      .switch {
        position: relative;
        display: inline-block;
        width: 44px;
        height: 24px;
      }
      .switch input { 
        opacity: 0;
        width: 0;
        height: 0;
      }
      .slider {
        position: absolute;
        cursor: pointer;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: #4b5563; /* slate-600 */
        transition: .4s;
        border-radius: 24px;
      }
      .slider:before {
        position: absolute;
        content: "";
        height: 18px;
        width: 18px;
        left: 3px;
        bottom: 3px;
        background-color: white;
        transition: .4s;
        border-radius: 50%;
      }
      input:checked + .slider {
        background-color: #4ade80; /* green-400 */
      }
      input:disabled + .slider {
        background-color: #374151; /* slate-700 */
        cursor: not-allowed;
      }
      input:checked + .slider:before {
        transform: translateX(20px);
      }
    </style>
  <script type="importmap">
{
  "imports": {
    "react": "https://esm.sh/react@18.3.1",
    "react-dom/client": "https://esm.sh/react-dom@18.3.1/client",
    "react-dom/": "https://esm.sh/react-dom@18.3.1/",
    "react/": "https://esm.sh/react@18.3.1/",
    "@supabase/supabase-js": "https://esm.sh/@supabase/supabase-js@2.44.4"
  }
}
</script>
<link rel="stylesheet" href="/index.css">
</head>
  <body>
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <div id="root"></div>
    <script type="module" src="/index.tsx"></script>
  </body>
</html>